<h2 class="text-2xl font-bold text-white mb-4">
  @if (viewMode === 'trending') {
    ğŸ”¥ Trending Movies
    <span class="text-cyan-400">
      ({{ activeTrending === 'day' ? 'Heute' : 'Diese Woche' }})
    </span>
  } @else {
    ğŸ” Suchergebnisse fÃ¼r
    <span class="text-cyan-400">"{{ currentQuery }}"</span>
  }
</h2>

<div class="flex gap-4 mb-6">
  <button
    (click)="loadTrendingMovies('day')"
    [class.bg-cyan-600]="viewMode === 'trending' && activeTrending === 'day'"
    [class.bg-gray-700]="!(viewMode === 'trending' && activeTrending === 'day')"
    class="px-4 py-2 rounded-lg text-white hover:bg-cyan-600 transition-colors">
    Heute
  </button>

  <button
    (click)="loadTrendingMovies('week')"
    [class.bg-cyan-600]="viewMode === 'trending' && activeTrending === 'week'"
    [class.bg-gray-700]="!(viewMode === 'trending' && activeTrending === 'week')"
    class="px-4 py-2 rounded-lg text-white hover:bg-cyan-600 transition-colors">
    Diese Woche
  </button>
</div>

<div class="animate-fade-in">
  <div class="movie-search mb-8 flex flex-col sm:flex-row gap-2">
    <input #searchBox type="text" placeholder="Filmtitel eingeben..."
           (keyup.enter)="searchMovies(searchBox.value)"
           class="flex-grow bg-gray-800 border-2 border-gray-700 text-white rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300" />
    <button (click)="searchMovies(searchBox.value)"
            class="bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-cyan-700 transition-transform duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 focus:ring-offset-gray-900">
      Suchen
    </button>
  </div>

  @if (isLoading) {
    <div class="text-center p-8 text-lg">ğŸ”„ Filme werden geladen...</div>
  }

  @if (errorMessage) {
    <div class="text-center p-8 text-red-400 bg-red-900/50 rounded-lg">
      {{ errorMessage }}
    </div>
  }

  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-8">
    @for (movie of movies; track movie.id) {
      <div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg transition-transform duration-300 hover:scale-105 hover:shadow-cyan-500/20">

        <img
          *ngIf="movie.poster_path"
          [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path"
          [alt]="movie.title"
          class="w-full h-auto object-cover"
        />

        <div class="p-4">
          <h3 class="text-lg font-bold text-white">
            {{ movie.title }} ({{ movie.release_date | date:'yyyy' }})
          </h3>

          <p class="text-sm text-gray-400 mt-2 h-20 overflow-hidden text-ellipsis">
            {{ movie.overview }}
          </p>

          <p class="mt-4 font-bold text-lg text-yellow-400">
            â­ {{ (movie.vote_average ?? 0).toFixed(1) }} / 10
            <span class="text-xs text-gray-500">
              ({{ movie.vote_count ?? 0 }} Stimmen)
            </span>
          </p>
        </div>
      </div>
    }
  </div>

  <!-- âœ… Pagination nur anzeigen, wenn eine Suche aktiv ist -->
  @if (currentQuery) {
    <div class="flex items-center justify-center gap-3 mt-8">
      <button
        (click)="prevPage()"
        [disabled]="currentPage <= 1 || isLoading"
        class="px-4 py-2 rounded-lg bg-gray-700 hover:bg-cyan-600 disabled:opacity-50 disabled:hover:bg-gray-700">
        â—€ ZurÃ¼ck
      </button>

      <span class="text-gray-300">
        Seite <b>{{ currentPage }}</b> von <b>{{ totalPages }}</b>
      </span>

      <button
        (click)="nextPage()"
        [disabled]="currentPage >= totalPages || isLoading"
        class="px-4 py-2 rounded-lg bg-gray-700 hover:bg-cyan-600 disabled:opacity-50 disabled:hover:bg-gray-700">
        Weiter â–¶
      </button>
    </div>
  }
</div>
